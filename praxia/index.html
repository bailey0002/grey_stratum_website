<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="color-scheme" content="dark light">
  <meta name="description" content="Praxia-1 - Evidence-based behavioral training for families">
  <meta name="theme-color" content="#1A1D21">
  <title>Praxia-1 | Cadencia | Grey Stratum</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;500&family=Fira+Code:wght@400;500&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="grey-stratum.css">
</head>
<body>
  <div class="app-container">
    
    <!-- ========================================
         HEADER
         ======================================== -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <div class="logo-gradus animated">
            <div class="gradus-bar"></div>
            <div class="gradus-bar"></div>
            <div class="gradus-bar"></div>
          </div>
          <div class="logo-text">
            <span class="logo-title">Praxia</span>
            <span class="logo-protocol">Cadencia Protocol</span>
          </div>
        </div>
        
        <div class="user-toggle">
          <button id="toggle-custos" class="toggle-btn active">Custos</button>
          <button id="toggle-filius" class="toggle-btn">Filius</button>
        </div>
        
        <div class="theme-toggle" onclick="toggleTheme()">
          <div class="theme-indicator">
            <div class="gradus-bar"></div>
            <div class="gradus-bar"></div>
            <div class="gradus-bar"></div>
          </div>
          <span id="themeLabel" class="theme-label">[ NOX ]</span>
        </div>
      </div>
    </header>

    <!-- ========================================
         MAIN CONTENT
         ======================================== -->
    <main class="main-content">
      
      <!-- =====================================
           ONBOARDING VIEW
           ===================================== -->
      <section id="view-onboarding" class="view">
        <div id="onboarding-content" class="onboarding-container">
          <!-- Rendered by JS -->
        </div>
        <div class="onboarding-nav">
          <button id="onboarding-prev" class="btn btn-ghost" onclick="onboardingPrev()" style="display: none;">[ Back ]</button>
          <button id="onboarding-skip" class="btn btn-ghost" onclick="skipOnboarding()">[ Skip ]</button>
          <button id="onboarding-next" class="btn btn-primary" onclick="onboardingNext()">[ Next ]</button>
        </div>
      </section>

      <!-- =====================================
           CUSTOS HOME
           ===================================== -->
      <section id="view-custos-home" class="view">
        <h1 class="page-title">Salve, Custos</h1>
        <p class="page-subtitle">Your daily practice awaits</p>
        
        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div id="stat-streak" class="stat-value">0</div>
            <div class="stat-label">Consecutio</div>
          </div>
          <div class="stat-card">
            <div id="stat-sessions" class="stat-value">0</div>
            <div class="stat-label">Sessions</div>
          </div>
          <div class="stat-card">
            <div id="stat-skills" class="stat-value">0</div>
            <div class="stat-label">Skills</div>
          </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="section-label">Actions</div>
        
        <div class="card action-card" onclick="showView('view-praxis-setup')">
          <div class="card-icon">
            <div class="gradus-mini">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-title">Begin Praxis</div>
            <div class="card-subtitle">Start a timed practice session</div>
          </div>
          <span class="chevron">›</span>
        </div>
        
        <div class="card action-card" onclick="showView('view-status-checkin')">
          <div class="card-icon">
            <div class="gradus-mini">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-title">Status Check</div>
            <div class="card-subtitle">Record current emotional state</div>
          </div>
          <span class="chevron">›</span>
        </div>
        
        <div class="card action-card" onclick="showView('view-respiro')">
          <div class="card-icon">
            <div class="gradus-mini">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-title">Respiro</div>
            <div class="card-subtitle">Guided calming protocol</div>
          </div>
          <span class="chevron">›</span>
        </div>
        
        <div class="card action-card" onclick="showView('view-urgentia')">
          <div class="card-icon">
            <div class="gradus-mini urgentia">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-title">Urgentia</div>
            <div class="card-subtitle">Crisis support & scripts</div>
          </div>
          <span class="chevron">›</span>
        </div>
      </section>

      <!-- =====================================
           FILIUS HOME
           ===================================== -->
      <section id="view-filius-home" class="view">
        <h1 class="page-title">Salve!</h1>
        <p class="page-subtitle">How are you feeling today?</p>
        
        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div id="filius-stat-streak" class="stat-value">0</div>
            <div class="stat-label">Days</div>
          </div>
          <div class="stat-card">
            <div id="filius-stat-points" class="stat-value">0</div>
            <div class="stat-label">Points</div>
          </div>
        </div>
        
        <!-- Mood Grid -->
        <div class="section-label">Tell me how you feel</div>
        <div id="filius-mood-grid" class="filius-mood-grid">
          <button class="mood-btn" data-mood="1" onclick="selectFiliusMood(1, this)">
            <div class="gradus-mood">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </button>
          <button class="mood-btn" data-mood="2" onclick="selectFiliusMood(2, this)">
            <div class="gradus-mood">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </button>
          <button class="mood-btn" data-mood="3" onclick="selectFiliusMood(3, this)">
            <div class="gradus-mood">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </button>
          <button class="mood-btn" data-mood="4" onclick="selectFiliusMood(4, this)">
            <div class="gradus-mood">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </button>
          <button class="mood-btn" data-mood="5" onclick="selectFiliusMood(5, this)">
            <div class="gradus-mood">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </button>
        </div>
        
        <!-- Quick Actions -->
        <div class="section-label mt-lg">Activities</div>
        
        <div class="card action-card" onclick="showView('view-filius-respiro')">
          <div class="card-icon">
            <div class="gradus-mini">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-title">Calm Down</div>
            <div class="card-subtitle">Breathe with me</div>
          </div>
          <span class="chevron">›</span>
        </div>
      </section>

      <!-- =====================================
           PRAXIS SETUP
           ===================================== -->
      <section id="view-praxis-setup" class="view">
        <button class="back-btn" onclick="showView('view-custos-home')">← Back</button>
        <h1 class="page-title">Praxis</h1>
        <p class="page-subtitle">Prepare for your practice session</p>
        
        <div class="section-label">Pre-Session Check</div>
        <p class="text-body mb-md">How are you feeling right now?</p>
        
        <div id="pre-mood-scale" class="mood-scale">
          <button class="mood-scale-btn" data-mood="1" onclick="selectPreMood(1)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="2" onclick="selectPreMood(2)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="3" onclick="selectPreMood(3)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="4" onclick="selectPreMood(4)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="5" onclick="selectPreMood(5)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
        </div>
        
        <div class="card mt-lg">
          <div class="section-label">Remember</div>
          <div class="praxis-skills">
            <div class="praxis-skill"><strong>P</strong>raise — Labeled, specific praise</div>
            <div class="praxis-skill"><strong>R</strong>eflect — Mirror their words</div>
            <div class="praxis-skill"><strong>I</strong>mitate — Copy their play</div>
            <div class="praxis-skill"><strong>D</strong>escribe — Narrate actions</div>
            <div class="praxis-skill"><strong>E</strong>njoy — Be genuinely present</div>
          </div>
        </div>
        
        <button id="start-praxis-btn" class="btn btn-primary btn-block btn-large mt-lg" onclick="startPraxis()" disabled>
          [ Initiate Praxis ]
        </button>
      </section>

      <!-- =====================================
           PRAXIS ACTIVE
           ===================================== -->
      <section id="view-praxis-active" class="view">
        <div class="timer-container">
          <div class="timer-ring">
            <svg viewBox="0 0 200 200">
              <circle class="timer-ring-bg" cx="100" cy="100" r="90" />
              <circle id="timer-progress" class="timer-ring-progress" cx="100" cy="100" r="90" />
            </svg>
            <div class="timer-display">
              <div id="timer-display" class="timer-time">15:00</div>
              <div class="timer-label">Remaining</div>
            </div>
          </div>
        </div>
        
        <div class="skill-prompt">
          <div class="skill-prompt-label">Current Focus</div>
          <div id="skill-prompt-text" class="skill-prompt-text">Labeled Praise</div>
          <div id="skill-prompt-hint" class="skill-prompt-hint">"I love how carefully you're building that!"</div>
          <div class="skill-counter">
            <button class="skill-count-btn" onclick="decrementSkill()">−</button>
            <span id="skill-count" class="skill-count-value">0</span>
            <button class="skill-count-btn" onclick="incrementSkill()">+</button>
          </div>
        </div>
        
        <div class="button-row mt-lg">
          <button class="btn btn-ghost" onclick="nextSkillPrompt()">[ Next Skill ]</button>
          <button class="btn btn-secondary" onclick="endPraxisEarly()">[ End Early ]</button>
        </div>
      </section>

      <!-- =====================================
           PRAXIS COMPLETE
           ===================================== -->
      <section id="view-praxis-complete" class="view">
        <h1 class="page-title text-center">Session Complete</h1>
        
        <div class="completion-stats">
          <div class="stat-card">
            <div id="session-duration" class="stat-value">15</div>
            <div class="stat-label">Minutes</div>
          </div>
        </div>
        
        <div class="section-label">Skills Used</div>
        <div class="completion-skills">
          <div class="completion-skill">
            <span class="skill-name">Praise</span>
            <span id="final-praise" class="skill-final">0</span>
          </div>
          <div class="completion-skill">
            <span class="skill-name">Reflect</span>
            <span id="final-reflect" class="skill-final">0</span>
          </div>
          <div class="completion-skill">
            <span class="skill-name">Describe</span>
            <span id="final-describe" class="skill-final">0</span>
          </div>
        </div>
        
        <div class="section-label mt-lg">Post-Session Check</div>
        <p class="text-body mb-md">How are you feeling now?</p>
        
        <div id="post-mood-scale" class="mood-scale">
          <button class="mood-scale-btn" data-mood="1" onclick="selectPostMood(1)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="2" onclick="selectPostMood(2)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="3" onclick="selectPostMood(3)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="4" onclick="selectPostMood(4)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
          <button class="mood-scale-btn" data-mood="5" onclick="selectPostMood(5)">
            <div class="gradus-scale"><div class="gradus-bar"></div><div class="gradus-bar"></div><div class="gradus-bar"></div></div>
          </button>
        </div>
        
        <div class="form-group mt-lg">
          <label class="form-label">Notes (Optional)</label>
          <textarea id="session-notes" class="form-textarea" placeholder="How did it go?"></textarea>
        </div>
        
        <button id="save-session-btn" class="btn btn-primary btn-block btn-large mt-lg" onclick="saveSession()" disabled>
          [ Save Session ]
        </button>
      </section>

      <!-- =====================================
           STATUS CHECK-IN
           ===================================== -->
      <section id="view-status-checkin" class="view">
        <button class="back-btn" onclick="showView('view-custos-home')">← Back</button>
        <h1 class="page-title">Status Check</h1>
        <p class="page-subtitle">How are you right now?</p>
        
        <div class="section-label">Intensity Level</div>
        <div class="gauge-container">
          <div id="gauge-track" class="gauge-track">
            <div id="gauge-handle" class="gauge-handle">5</div>
          </div>
          <div class="gauge-labels">
            <span class="gauge-label">Calm</span>
            <span class="gauge-label">Elevated</span>
            <span class="gauge-label">Critical</span>
          </div>
        </div>
        
        <div class="section-label">What words fit?</div>
        <div id="state-vocabulary" class="state-vocabulary">
          <!-- Rendered by JS -->
        </div>
        
        <div class="form-group mt-lg">
          <label class="form-label">Context (Optional)</label>
          <textarea id="status-context" class="form-textarea" placeholder="What's happening?"></textarea>
        </div>
        
        <button class="btn btn-primary btn-block btn-large mt-lg" onclick="saveStatusCheckin()">
          [ Save Check-In ]
        </button>
      </section>

      <!-- =====================================
           RESPIRO (Parent)
           ===================================== -->
      <section id="view-respiro" class="view">
        <button class="back-btn" onclick="showView('view-custos-home')">← Back</button>
        
        <div class="respiro-step">
          <div id="respiro-dots" class="respiro-dots">
            <div class="respiro-dot active"></div>
            <div class="respiro-dot"></div>
            <div class="respiro-dot"></div>
            <div class="respiro-dot"></div>
            <div class="respiro-dot"></div>
          </div>
          
          <div id="respiro-visual" class="respiro-visual step-halt">
            <div class="gradus-large">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          
          <h2 id="respiro-title" class="respiro-title">Halt</h2>
          <p id="respiro-instruction" class="respiro-instruction">Freeze. Do not react. Pause here.</p>
          
          <div class="respiro-nav">
            <button id="respiro-prev" class="btn btn-ghost" onclick="respiroPrev()" disabled>[ Back ]</button>
            <button id="respiro-next" class="btn btn-primary" onclick="respiroNext()">[ Next ]</button>
          </div>
        </div>
      </section>

      <!-- =====================================
           RESPIRO (Child)
           ===================================== -->
      <section id="view-filius-respiro" class="view">
        <button class="back-btn" onclick="showView('view-filius-home')">← Back</button>
        
        <div class="respiro-step">
          <div id="filius-respiro-dots" class="respiro-dots">
            <div class="respiro-dot active"></div>
            <div class="respiro-dot"></div>
            <div class="respiro-dot"></div>
            <div class="respiro-dot"></div>
            <div class="respiro-dot"></div>
          </div>
          
          <div id="filius-respiro-visual" class="respiro-visual step-halt">
            <div class="gradus-large">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          
          <h2 id="filius-respiro-title" class="respiro-title">Halt</h2>
          <p id="filius-respiro-instruction" class="respiro-instruction">Freeze like a statue!</p>
          
          <div class="respiro-nav">
            <button id="filius-respiro-prev" class="btn btn-ghost" onclick="filiusRespiroPrev()" disabled>[ Back ]</button>
            <button id="filius-respiro-next" class="btn btn-primary" onclick="filiusRespiroNext()">[ Next ]</button>
          </div>
        </div>
      </section>

      <!-- =====================================
           URGENTIA
           ===================================== -->
      <section id="view-urgentia" class="view">
        <button class="back-btn" onclick="showView('view-custos-home')">← Back</button>
        
        <div class="urgentia-header">
          <h2>Urgentia</h2>
          <p>In-the-moment support</p>
        </div>
        
        <div class="breathing-pacer">
          <span id="breathing-text" class="breathing-pacer-text">Inhale</span>
        </div>
        
        <div class="section-label">Quick Scripts</div>
        <div class="protocol-scripts">
          <div class="protocol-script">
            <div class="protocol-script-label">Validate</div>
            <div class="protocol-script-text">"I can see you're really upset right now. That's okay."</div>
          </div>
          <div class="protocol-script">
            <div class="protocol-script-label">Early Prompt</div>
            <div class="protocol-script-text">"I notice your body is getting tense. Let's take a breath together."</div>
          </div>
          <div class="protocol-script">
            <div class="protocol-script-label">Offer Choice</div>
            <div class="protocol-script-text">"Would you like to squeeze something or go to your calm spot?"</div>
          </div>
        </div>
        
        <div class="button-row mt-lg">
          <button class="btn btn-primary" onclick="showView('view-respiro')">[ Start Respiro ]</button>
          <button class="btn btn-secondary" onclick="showView('view-episode-log')">[ Log Episode ]</button>
        </div>
      </section>

      <!-- =====================================
           EPISODE LOG
           ===================================== -->
      <section id="view-episode-log" class="view">
        <button class="back-btn" onclick="showView('view-urgentia')">← Back</button>
        <h1 class="page-title">Log Episode</h1>
        <p class="page-subtitle">Record what happened for pattern analysis</p>
        
        <div class="section-label">Peak Intensity</div>
        <div class="gauge-container">
          <div id="episode-gauge-track" class="gauge-track">
            <div id="episode-gauge-handle" class="gauge-handle">5</div>
          </div>
          <div class="gauge-labels">
            <span class="gauge-label">Mild</span>
            <span class="gauge-label">Moderate</span>
            <span class="gauge-label">Severe</span>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Trigger</label>
          <input id="episode-trigger" type="text" class="form-input" placeholder="What started it?">
        </div>
        
        <div class="section-label">What Helped?</div>
        <div id="intervention-options" class="state-vocabulary">
          <span class="state-word" onclick="toggleIntervention(this, 'validation')">validation</span>
          <span class="state-word" onclick="toggleIntervention(this, 'breathing')">breathing</span>
          <span class="state-word" onclick="toggleIntervention(this, 'space')">gave space</span>
          <span class="state-word" onclick="toggleIntervention(this, 'choice')">offered choice</span>
          <span class="state-word" onclick="toggleIntervention(this, 'respiro')">respiro</span>
          <span class="state-word" onclick="toggleIntervention(this, 'ignore')">selective ignore</span>
        </div>
        
        <div class="form-group mt-md">
          <label class="form-label">Duration (minutes)</label>
          <input id="episode-duration" type="number" class="form-input" placeholder="How long did it last?">
        </div>
        
        <div class="form-group">
          <label class="form-label">Notes</label>
          <textarea id="episode-notes" class="form-textarea" placeholder="Any other observations?"></textarea>
        </div>
        
        <button class="btn btn-primary btn-block btn-large mt-lg" onclick="saveEpisode()">
          [ Save Episode ]
        </button>
      </section>

      <!-- =====================================
           CONSILIUM (Parent Dashboard)
           ===================================== -->
      <section id="view-consilium" class="view">
        <h1 class="page-title">Consilium</h1>
        <p class="page-subtitle">Family progress overview</p>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div id="consilium-streak" class="stat-value">0</div>
            <div class="stat-label">Family Streak</div>
          </div>
          <div class="stat-card">
            <div id="consilium-points" class="stat-value">0</div>
            <div class="stat-label">Points</div>
          </div>
        </div>
        
        <div class="section-label">This Week</div>
        <div id="progressio-calendar" class="progressio-calendar">
          <!-- Rendered by JS -->
        </div>
        
        <div class="section-label mt-lg">Weekly Skills</div>
        <div class="weekly-skills-grid">
          <div class="weekly-skill">
            <div class="weekly-skill-label">Praise</div>
            <div id="weekly-praise" class="weekly-skill-value">0</div>
          </div>
          <div class="weekly-skill">
            <div class="weekly-skill-label">Reflect</div>
            <div id="weekly-reflect" class="weekly-skill-value">0</div>
          </div>
          <div class="weekly-skill">
            <div class="weekly-skill-label">Describe</div>
            <div id="weekly-describe" class="weekly-skill-value">0</div>
          </div>
        </div>
        
        <div class="section-label mt-lg">Assignments</div>
        <div id="assignments-overview">
          <!-- Rendered by JS -->
        </div>
        
        <div class="card action-card mt-lg" onclick="showView('view-achievements')">
          <div class="card-icon">
            <div class="gradus-mini">
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
              <div class="gradus-bar"></div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-title">Achievements</div>
            <div class="card-subtitle">View earned rewards</div>
          </div>
          <span class="chevron">›</span>
        </div>
      </section>

      <!-- =====================================
           PROGRESSIO (Legacy, redirects to Consilium)
           ===================================== -->
      <section id="view-progressio" class="view">
        <h1 class="page-title">Progressio</h1>
        <p class="page-subtitle">Track your journey</p>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div id="progress-streak" class="stat-value">0</div>
            <div class="stat-label">Streak</div>
          </div>
          <div class="stat-card">
            <div id="progress-sessions" class="stat-value">0</div>
            <div class="stat-label">Sessions</div>
          </div>
          <div class="stat-card">
            <div id="progress-episodes" class="stat-value">0</div>
            <div class="stat-label">Episodes</div>
          </div>
        </div>
      </section>

      <!-- =====================================
           SCHOLA (Classroom)
           ===================================== -->
      <section id="view-schola" class="view">
        <h1 class="page-title">Schola</h1>
        <p class="page-subtitle">Your learning path</p>
        
        <!-- Phase Navigation -->
        <div class="phase-nav">
          <button class="phase-nav-btn active" data-phase="fundamentum" onclick="selectPhase('fundamentum')">I</button>
          <button class="phase-nav-btn" data-phase="praxis" onclick="selectPhase('praxis')">II</button>
          <button class="phase-nav-btn" data-phase="imperium" onclick="selectPhase('imperium')">III</button>
          <button class="phase-nav-btn" data-phase="autonomia" onclick="selectPhase('autonomia')">IV</button>
        </div>
        
        <!-- Current Phase Info -->
        <div class="phase-header">
          <h2 id="curriculum-phase-name" class="phase-name">Fundamentum</h2>
          <p id="curriculum-phase-subtitle" class="phase-subtitle">Foundation</p>
        </div>
        
        <div class="progress-bar mb-md">
          <div id="curriculum-progress-fill" class="progress-fill" style="width: 0%"></div>
        </div>
        
        <p id="curriculum-phase-desc" class="text-body mb-lg">Building the relationship foundation through child-directed interaction</p>
        
        <div class="section-label">
          <span id="curriculum-week">Week 1</span>
        </div>
        
        <div id="curriculum-lessons-container">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- =====================================
           CURRICULUM (Legacy, redirects to Schola)
           ===================================== -->
      <section id="view-curriculum" class="view">
        <!-- Same as Schola -->
      </section>

      <!-- =====================================
           LESSON DETAIL
           ===================================== -->
      <section id="view-lesson-detail" class="view">
        <button class="back-btn" onclick="showView('view-schola')">← Back</button>
        
        <div class="lesson-header">
          <span id="lesson-type-badge" class="lesson-type-badge">skill</span>
          <h1 id="lesson-detail-title" class="page-title">Lesson Title</h1>
          <p id="lesson-detail-subtitle" class="page-subtitle">Subtitle</p>
        </div>
        
        <p id="lesson-detail-description" class="text-body mb-lg">Description</p>
        
        <div class="section-label">Objectives</div>
        <ul id="lesson-objectives-list" class="objectives-list">
          <!-- Rendered by JS -->
        </ul>
        
        <div id="lesson-briefing-card" class="card mt-lg">
          <div class="section-label">Briefing</div>
          <p id="lesson-briefing-text" class="text-body"></p>
        </div>
        
        <div id="lesson-key-points-card" class="card">
          <div class="section-label">Key Points</div>
          <ul id="lesson-key-points-list" class="key-points-list">
            <!-- Rendered by JS -->
          </ul>
        </div>
        
        <div id="lesson-assignment-card" class="card">
          <div class="section-label">Assignment</div>
          <p id="lesson-assignment-text" class="text-body"></p>
          <div class="assignment-progress">
            <span id="lesson-assignment-count">0 / 1</span>
            <span id="lesson-assignment-status" class="assignment-status">Incomplete</span>
          </div>
        </div>
        
        <button id="lesson-complete-btn" class="btn btn-primary btn-block btn-large mt-lg" onclick="toggleLessonComplete()">
          [ Mark Complete ]
        </button>
      </section>

      <!-- =====================================
           LUDUS (Playground)
           ===================================== -->
      <section id="view-ludus" class="view">
        <h1 class="page-title">Ludus</h1>
        <p class="page-subtitle">Your playground</p>
        
        <div id="ludus-activities">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- =====================================
           BIBLIOTHECA (Library)
           ===================================== -->
      <section id="view-bibliotheca" class="view">
        <h1 class="page-title">Bibliotheca</h1>
        <p class="page-subtitle">Reference & research</p>
        
        <div id="bibliotheca-content">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- =====================================
           BIBLIOTHECA (Child Version)
           ===================================== -->
      <section id="view-bibliotheca-filius" class="view">
        <h1 class="page-title">Library</h1>
        <p class="page-subtitle">Learn cool stuff</p>
        
        <div class="card">
          <div class="card-title">About Respiro</div>
          <div class="card-subtitle">When big feelings come, you have steps to feel better!</div>
        </div>
        
        <div class="card">
          <div class="card-title">About Feelings</div>
          <div class="card-subtitle">Everyone has feelings. It's okay to feel them all!</div>
        </div>
      </section>

      <!-- =====================================
           DETAIL VIEW (Generic)
           ===================================== -->
      <section id="view-detail" class="view">
        <button class="back-btn" onclick="showView('view-bibliotheca')">← Back</button>
        
        <h1 id="detail-title" class="page-title">Title</h1>
        <p id="detail-latin" class="page-subtitle"></p>
        
        <p id="detail-description" class="text-body mb-lg"></p>
        
        <div id="detail-examples">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- =====================================
           ACHIEVEMENTS
           ===================================== -->
      <section id="view-achievements" class="view">
        <button class="back-btn" onclick="showView('view-consilium')">← Back</button>
        <h1 class="page-title">Achievements</h1>
        <p class="page-subtitle">Your accomplishments</p>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div id="achievement-streak" class="stat-value">0</div>
            <div class="stat-label">Streak</div>
          </div>
          <div class="stat-card">
            <div id="total-points" class="stat-value">0</div>
            <div class="stat-label">Points</div>
          </div>
        </div>
        
        <div class="section-label">Streak Milestones</div>
        <div id="streak-milestones" class="streak-milestones">
          <!-- Rendered by JS -->
        </div>
        <p id="streak-next-milestone" class="text-body text-center mt-sm"></p>
        
        <div class="section-label mt-lg">Earned</div>
        <div id="achievements-earned" class="achievements-grid">
          <!-- Rendered by JS -->
        </div>
        
        <div class="section-label mt-lg">Available</div>
        <div id="achievements-available" class="achievements-grid">
          <!-- Rendered by JS -->
        </div>
        
        <div class="section-label mt-lg">Rewards</div>
        <div id="rewards-list" class="rewards-list">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- =====================================
           FILIUS ACHIEVEMENTS
           ===================================== -->
      <section id="view-filius-achievements" class="view">
        <h1 class="page-title">My Badges</h1>
        <p class="page-subtitle">Look what you've earned!</p>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div id="filius-streak" class="stat-value">0</div>
            <div class="stat-label">Days</div>
          </div>
          <div class="stat-card">
            <div id="filius-points" class="stat-value">0</div>
            <div class="stat-label">Points</div>
          </div>
        </div>
        
        <div class="section-label mt-lg">My Badges</div>
        <div id="filius-achievements-grid" class="achievements-grid">
          <!-- Rendered by JS -->
        </div>
      </section>

      <!-- =====================================
           SETTINGS
           ===================================== -->
      <section id="view-settings" class="view">
        <h1 class="page-title">Settings</h1>
        <p class="page-subtitle">Configure your experience</p>
        
        <div class="section-label">Family</div>
        <div class="card">
          <div class="form-group mb-sm">
            <label class="form-label">Family Name</label>
            <input id="settings-family-name" type="text" class="form-input" placeholder="Our Family">
          </div>
          <button class="btn btn-secondary" onclick="saveFamilyName()">[ Save ]</button>
        </div>
        
        <div class="section-label mt-lg">Family Members</div>
        <div id="settings-users-list" class="users-list">
          <!-- Rendered by JS -->
        </div>
        <button class="btn btn-secondary btn-block mt-md" onclick="showAddUserModal()">[ Add Member ]</button>
        
        <div class="section-label mt-lg">Preferences</div>
        <div class="card">
          <div class="settings-row">
            <span class="settings-label">Theme</span>
            <button id="settings-theme-btn" class="btn btn-ghost" onclick="toggleTheme()">[ NOX ]</button>
          </div>
          <div class="settings-row">
            <span class="settings-label">Session Duration</span>
            <select id="settings-praxis-duration" class="form-select" onchange="savePraxisDuration()">
              <option value="300">5 min</option>
              <option value="600">10 min</option>
              <option value="900" selected>15 min</option>
              <option value="1200">20 min</option>
            </select>
          </div>
          <div class="settings-row">
            <span class="settings-label">Notifications</span>
            <div id="settings-notifications-toggle" class="toggle-switch" onclick="toggleNotifications()">
              <div class="toggle-slider"></div>
            </div>
          </div>
        </div>
        
        <div class="section-label mt-lg">Data</div>
        <div class="card">
          <button class="btn btn-secondary btn-block mb-md" onclick="exportData()">[ Export Data ]</button>
          <button class="btn btn-danger btn-block" onclick="confirmResetProgress()">[ Reset Progress ]</button>
        </div>
        
        <div class="app-info mt-xl text-center">
          <p class="text-muted">Praxia-1 | Cadencia Protocol</p>
          <p class="text-muted">Grey Stratum™</p>
        </div>
      </section>

    </main>

    <!-- ========================================
         BOTTOM NAVIGATION
         ======================================== -->
    <nav id="bottom-nav" class="bottom-nav">
      <button class="nav-item active" data-nav="home">
        <div class="nav-icon">
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
        </div>
        <span>Home</span>
      </button>
      <button class="nav-item" data-nav="progressio">
        <div class="nav-icon">
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
        </div>
        <span>Consilium</span>
      </button>
      <button class="nav-item" data-nav="curriculum">
        <div class="nav-icon">
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
        </div>
        <span>Schola</span>
      </button>
      <button class="nav-item" data-nav="ludus" style="display: none;">
        <div class="nav-icon">
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
        </div>
        <span>Ludus</span>
      </button>
      <button class="nav-item" data-nav="bibliotheca">
        <div class="nav-icon">
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
        </div>
        <span>Bibliotheca</span>
      </button>
      <button class="nav-item" data-nav="settings">
        <div class="nav-icon">
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
          <div class="gradus-bar"></div>
        </div>
        <span>Settings</span>
      </button>
    </nav>

    <!-- ========================================
         MODALS
         ======================================== -->
    
    <!-- Confirmation Modal -->
    <div id="modal-confirm" class="modal-overlay">
      <div class="modal">
        <div class="modal-icon">
          <div class="gradus-confirm">
            <div class="gradus-bar"></div>
            <div class="gradus-bar"></div>
            <div class="gradus-bar"></div>
          </div>
        </div>
        <h3 id="modal-title" class="modal-title">Confirmed</h3>
        <p id="modal-message" class="text-body text-center">Action completed successfully.</p>
        <button class="btn btn-primary btn-block mt-lg" onclick="hideModal()">[ Dismiss ]</button>
      </div>
    </div>
    
    <!-- Add User Modal -->
    <div id="modal-add-user" class="modal-overlay">
      <div class="modal">
        <h3 class="modal-title">Add Family Member</h3>
        <div class="form-group mt-lg">
          <label class="form-label">Name</label>
          <input id="new-user-name" type="text" class="form-input" placeholder="Enter name">
        </div>
        <div class="form-group">
          <label class="form-label">Role</label>
          <div class="role-select">
            <button class="role-btn active" onclick="selectNewUserRole('custos', this)">Custos</button>
            <button class="role-btn" onclick="selectNewUserRole('filius', this)">Filius</button>
          </div>
        </div>
        <div class="button-row mt-lg">
          <button class="btn btn-ghost" onclick="hideAddUserModal()">[ Cancel ]</button>
          <button class="btn btn-primary" onclick="addNewUser()">[ Add ]</button>
        </div>
      </div>
    </div>
    
    <!-- Reset Confirmation Modal -->
    <div id="modal-reset" class="modal-overlay">
      <div class="modal">
        <h3 class="modal-title">Reset Progress?</h3>
        <p class="text-body text-center mt-md">This will delete all sessions, episodes, and achievements. This cannot be undone.</p>
        <div class="button-row mt-lg">
          <button class="btn btn-ghost" onclick="hideResetModal()">[ Cancel ]</button>
          <button class="btn btn-danger" onclick="executeReset()">[ Reset ]</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Scripts -->
  <script src="storage.js"></script>
  <script src="users.js"></script>
  <script src="curriculum.js"></script>
  <script src="rewards.js"></script>
  <script src="app.js"></script>
</body>
</html>
